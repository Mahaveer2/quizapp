import{S as ye,i as ve,s as ke,q as B,e as ue,r as A,b as R,d as x,f as K,g as v,h as g,I as Ee,o as we,v as Q,w as Te,k as w,a as I,l as T,m as S,c as L,n as y,G as u,H as oe,y as W,z as X,A as Y,J as pe,K as me,L as Se,B as Z,M as xe,N as $e}from"../chunks/index.dedb3b4e.js";import{s as Ce,C as ee}from"../chunks/sse.bbe8088b.js";import{p as Ie}from"../chunks/stores.0330b986.js";function he(f,s,t){const e=f.slice();return e[12]=s[t],e}function Le(f){let s,t,e,l,o;return{c(){s=w("a"),t=B("Login to Continue"),e=I(),l=w("p"),o=B("This is just a prototype of your requirements."),this.h()},l(a){s=T(a,"A",{href:!0,class:!0});var c=S(s);t=A(c,"Login to Continue"),c.forEach(g),e=L(a),l=T(a,"P",{});var d=S(l);o=A(d,"This is just a prototype of your requirements."),d.forEach(g),this.h()},h(){y(s,"href","/login"),y(s,"class","mt-[100px] p-3 flex justify-center items-center bg-black text-white")},m(a,c){R(a,s,c),u(s,t),R(a,e,c),R(a,l,c),u(l,o)},p:oe,i:oe,o:oe,d(a){a&&g(s),a&&g(e),a&&g(l)}}}function De(f){let s,t,e,l,o,a,c,d,r,k,$,C,b,P,E,q,V,H,J,te,D,N,se,M,le,z,ne,ae;P=new ee({props:{type:"assistant",message:"Type start to continue start"}});let O=f[3],p=[];for(let n=0;n<O.length;n+=1)p[n]=_e(he(f,O,n));const be=n=>x(p[n],1,1,()=>{p[n]=null});let h=f[1]&&ge(f),_=f[2]&&de();return{c(){s=w("div"),t=w("div"),e=w("a"),l=B("Learn"),o=I(),a=w("h1"),c=B("Chatty"),d=I(),r=w("p"),k=B("Powered by gpt-3.5-turbo"),$=I(),C=w("div"),b=w("div"),W(P.$$.fragment),E=I();for(let n=0;n<p.length;n+=1)p[n].c();q=I(),h&&h.c(),V=I(),_&&_.c(),H=I(),J=w("div"),te=I(),D=w("form"),N=w("input"),se=I(),M=w("button"),le=B("Send"),this.h()},l(n){s=T(n,"DIV",{class:!0});var m=S(s);t=T(m,"DIV",{});var i=S(t);e=T(i,"A",{href:!0,class:!0});var U=S(e);l=A(U,"Learn"),U.forEach(g),o=L(i),a=T(i,"H1",{class:!0});var ce=S(a);c=A(ce,"Chatty"),ce.forEach(g),d=L(i),r=T(i,"P",{class:!0});var ie=S(r);k=A(ie,"Powered by gpt-3.5-turbo"),ie.forEach(g),i.forEach(g),$=L(m),C=T(m,"DIV",{class:!0});var F=S(C);b=T(F,"DIV",{class:!0});var j=S(b);X(P.$$.fragment,j),E=L(j);for(let re=0;re<p.length;re+=1)p[re].l(j);q=L(j),h&&h.l(j),V=L(j),_&&_.l(j),j.forEach(g),H=L(F),J=T(F,"DIV",{class:!0}),S(J).forEach(g),F.forEach(g),te=L(m),D=T(m,"FORM",{class:!0});var G=S(D);N=T(G,"INPUT",{type:!0,class:!0}),se=L(G),M=T(G,"BUTTON",{type:!0,class:!0});var fe=S(M);le=A(fe,"Send"),fe.forEach(g),G.forEach(g),m.forEach(g),this.h()},h(){y(e,"href","/"),y(e,"class","mt-[100px] p-3 flex justify-center items-center bg-black text-white"),y(a,"class","text-2xl font-bold w-full text-center"),y(r,"class","text-sm italic"),y(b,"class","flex flex-col gap-2"),y(J,"class",""),y(C,"class","h-[500px] w-full bg-gray-900 rounded-md p-4 overflow-y-auto flex flex-col gap-4"),y(N,"type","text"),y(N,"class","input input-bordered w-full"),y(M,"type","submit"),y(M,"class","btn btn-accent"),y(D,"class","flex w-full rounded-md gap-4 bg-gray-900 p-4"),y(s,"class","flex flex-col pt-4 w-full px-8 items-center gap-2")},m(n,m){R(n,s,m),u(s,t),u(t,e),u(e,l),u(t,o),u(t,a),u(a,c),u(t,d),u(t,r),u(r,k),u(s,$),u(s,C),u(C,b),Y(P,b,null),u(b,E);for(let i=0;i<p.length;i+=1)p[i].m(b,null);u(b,q),h&&h.m(b,null),u(b,V),_&&_.m(b,null),u(C,H),u(C,J),f[7](J),u(s,te),u(s,D),u(D,N),pe(N,f[0]),u(D,se),u(D,M),u(M,le),z=!0,ne||(ae=[me(N,"input",f[8]),me(D,"submit",Se(f[9]))],ne=!0)},p(n,m){if(m&8){O=n[3];let i;for(i=0;i<O.length;i+=1){const U=he(n,O,i);p[i]?(p[i].p(U,m),v(p[i],1)):(p[i]=_e(U),p[i].c(),v(p[i],1),p[i].m(b,q))}for(Q(),i=O.length;i<p.length;i+=1)be(i);K()}n[1]?h?(h.p(n,m),m&2&&v(h,1)):(h=ge(n),h.c(),v(h,1),h.m(b,V)):h&&(Q(),x(h,1,1,()=>{h=null}),K()),n[2]?_?m&4&&v(_,1):(_=de(),_.c(),v(_,1),_.m(b,null)):_&&(Q(),x(_,1,1,()=>{_=null}),K()),m&1&&N.value!==n[0]&&pe(N,n[0])},i(n){if(!z){v(P.$$.fragment,n);for(let m=0;m<O.length;m+=1)v(p[m]);v(h),v(_),z=!0}},o(n){x(P.$$.fragment,n),p=p.filter(Boolean);for(let m=0;m<p.length;m+=1)x(p[m]);x(h),x(_),z=!1},d(n){n&&g(s),Z(P),xe(p,n),h&&h.d(),_&&_.d(),f[7](null),ne=!1,$e(ae)}}}function _e(f){let s,t;return s=new ee({props:{type:f[12].role,message:f[12].content}}),{c(){W(s.$$.fragment)},l(e){X(s.$$.fragment,e)},m(e,l){Y(s,e,l),t=!0},p(e,l){const o={};l&8&&(o.type=e[12].role),l&8&&(o.message=e[12].content),s.$set(o)},i(e){t||(v(s.$$.fragment,e),t=!0)},o(e){x(s.$$.fragment,e),t=!1},d(e){Z(s,e)}}}function ge(f){let s,t;return s=new ee({props:{type:"assistant",message:f[1]}}),{c(){W(s.$$.fragment)},l(e){X(s.$$.fragment,e)},m(e,l){Y(s,e,l),t=!0},p(e,l){const o={};l&2&&(o.message=e[1]),s.$set(o)},i(e){t||(v(s.$$.fragment,e),t=!0)},o(e){x(s.$$.fragment,e),t=!1},d(e){Z(s,e)}}}function de(f){let s,t;return s=new ee({props:{type:"assistant",message:"Loading.."}}),{c(){W(s.$$.fragment)},l(e){X(s.$$.fragment,e)},m(e,l){Y(s,e,l),t=!0},i(e){t||(v(s.$$.fragment,e),t=!0)},o(e){x(s.$$.fragment,e),t=!1},d(e){Z(s,e)}}}function Ne(f){let s,t,e,l,o;const a=[De,Le],c=[];function d(r,k){return r[5].data.user?0:1}return t=d(f),e=c[t]=a[t](f),{c(){s=B(`TEST

`),e.c(),l=ue()},l(r){s=A(r,`TEST

`),e.l(r),l=ue()},m(r,k){R(r,s,k),c[t].m(r,k),R(r,l,k),o=!0},p(r,[k]){let $=t;t=d(r),t===$?c[t].p(r,k):(Q(),x(c[$],1,1,()=>{c[$]=null}),K(),e=c[t],e?e.p(r,k):(e=c[t]=a[t](r),e.c()),v(e,1),e.m(l.parentNode,l))},i(r){o||(v(e),o=!0)},o(r){x(e),o=!1},d(r){r&&g(s),c[t].d(r),r&&g(l)}}}function Pe(f,s,t){let e;Ee(f,Ie,E=>t(5,e=E));let l="",o="",a=!1,c=[],d;function r(){setTimeout(function(){d.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"}),t(4,d.scrollTop=d.scrollHeight,d)},100)}const k=async()=>{t(2,a=!0),t(3,c=[...c,{role:"user",content:l}]);const E=new Ce.SSE("/api/tester",{headers:{"Content-Type":"application/json"},payload:JSON.stringify({messages:c})});E.addEventListener("error",$),E.addEventListener("message",async q=>{r();try{if(t(2,a=!1),q.data==="[DONE]"){t(3,c=[...c,{role:"assistant",content:o}]),t(1,o=""),t(0,l="");return}const V=JSON.parse(q.data),[{delta:H}]=V.choices;H.content&&t(1,o=(o??"")+H.content)}catch(V){$(V)}}),E.stream(),r()};function $(E){t(2,a=!1),t(0,l=""),t(1,o=""),console.error(E)}we(async()=>{e.data.user,r()});function C(E){Te[E?"unshift":"push"](()=>{d=E,t(4,d)})}function b(){l=this.value,t(0,l)}return[l,o,a,c,d,e,k,C,b,()=>k()]}class Me extends ye{constructor(s){super(),ve(this,s,Pe,Ne,ke,{})}}export{Me as default};
